/*!
 * vanilla-picker v2.0.2
 * https://github.com/Sphinxxxx/vanilla-picker
 *
 * Copyright 2017-2018 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
 * Released under the ISC license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Picker=e()}(this,function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],i=!0,o=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);i=!0);}catch(t){o=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw n}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var r=this;r.length<t;)r=e+r;return r};var i=function(){function i(e,o,n,a){t(this,i);var s=this;if(void 0===e);else if(Array.isArray(e))this.rgba=e;else if(void 0===n){var l=e&&(""+e).trim();l&&function(t){if(t.startsWith("#"))s.rgba=i.hexToRgb(t);else if(t.startsWith("hsl")){var e=t.match(/([\-\d\.e]+)/g).map(Number),o=r(e,4),n=o[0],a=o[1],l=o[2],p=o[3];void 0===p&&(p=1),n/=360,a/=100,l/=100,s.hsla=[n,a,l,p]}else{var c=t.match(/([\-\d\.e]+)/g).map(Number),u=r(c,4),h=u[0],d=u[1],f=u[2],g=u[3];void 0===g&&(g=1),s.rgba=[h,d,f,g]}}(l.toLowerCase())}else this.rgba=[e,o,n,void 0===a?1:a]}return e(i,[{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=i.hslToRgb(this._hsla)},set:function(t){3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return"rgb("+this.rgba.slice(0,3)+")"}},{key:"rgbaString",get:function(){return"rgba("+this.rgba+")"}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=i.rgbToHsl(this._rgba)},set:function(t){3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){var t=this.hsla;return"hsl("+360*t[0]+","+100*t[1]+"%,"+100*t[2]+"%)"}},{key:"hslaString",get:function(){var t=this.hsla;return"hsla("+360*t[0]+","+100*t[1]+"%,"+100*t[2]+"%,"+t[3]+")"}},{key:"hex",get:function(){return"#"+this.rgba.map(function(t,e){return e<3?t.toString(16):(255*t).toString(16)}).map(function(t){return t.padStart(2,"0")}).join("")},set:function(t){this.rgba=i.hexToRgb(t)}}],[{key:"hexToRgb",value:function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^(\w{8})$/))throw new Error("Unknown hex color; "+t);var r=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(t){return parseInt(t,16)});return r[3]=r[3]/255,r}},{key:"rgbToHsl",value:function(t){var e=r(t,4),i=e[0],o=e[1],n=e[2],a=e[3];i/=255,o/=255,n/=255;var s=Math.max(i,o,n),l=Math.min(i,o,n),p=void 0,c=void 0,u=(s+l)/2;if(s===l)p=c=0;else{var h=s-l;switch(c=u>.5?h/(2-s-l):h/(s+l),s){case i:p=(o-n)/h+(o<n?6:0);break;case o:p=(n-i)/h+2;break;case n:p=(i-o)/h+4}p/=6}return[p,c,u,a]}},{key:"hslToRgb",value:function(t){var e=r(t,4),i=e[0],o=e[1],n=e[2],a=e[3],s=void 0,l=void 0,p=void 0;if(0===o)s=l=p=n;else{var c=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},u=n<.5?n*(1+o):n+o-n*o,h=2*n-u;s=c(h,u,i+1/3),l=c(h,u,i),p=c(h,u,i-1/3)}var d=[255*s,255*l,255*p].map(Math.round);return d[3]=a,d}}]),i}();function o(t){var e=Element.prototype;e.matches||(e.matches=e.msMatchesSelector||e.webkitMatchesSelector),e.closest||(e.closest=function(t){var e=this;do{if(e.matches(t))return e;e="svg"===e.tagName?e.parentNode:e.parentElement}while(e);return null});var r=(t=t||{}).container||document.documentElement,i=t.selector,o=t.callback||console.log,n=t.callbackDragStart,a=t.callbackDragEnd,s=t.callbackClick,l=!1!==t.roundCoords,p=!1!==t.dragOutside,c=t.handleOffset||!1!==t.handleOffset,u=null;switch(c){case"center":u=!0;break;case"topleft":case"top-left":u=!1}var h=void 0,d=void 0,f=void 0;function g(t,e,i,o){var n=t.clientX,a=t.clientY;function s(t,e,r){return Math.max(e,Math.min(t,r))}if(e){var p=e.getBoundingClientRect();if(n-=p.left,a-=p.top,i&&(n-=i[0],a-=i[1]),o&&(n=s(n,0,p.width),a=s(a,0,p.height)),e!==r)(null!==u?u:"circle"===e.nodeName||"ellipse"===e.nodeName)&&(n-=p.width/2,a-=p.height/2)}return l?[Math.round(n),Math.round(a)]:[n,a]}function m(t){(h=i?t.target.closest(i):{})&&(t.preventDefault(),t.stopPropagation(),d=i&&c?g(t,h):[0,0],f=g(t,r,d),l&&(f=f.map(Math.round)),n&&n(h,f))}function _(t){if(h){t.preventDefault(),t.stopPropagation();var e=g(t,r,d,!p);o(h,e,f)}}function v(t){if(h){if(a||s){var e=g(t,r,d,!p);s&&f[0]===e[0]&&f[1]===e[1]&&s(h,f),a&&a(h,e,f)}h=null}}function k(t){v(y(t))}function w(t){return void 0!==t.buttons?1===t.buttons:1===t.which}function b(t,e){1===t.touches.length?e(y(t)):v(t)}function y(t){var e=t.targetTouches[0];return e||(e=t.changedTouches[0]),e.preventDefault=t.preventDefault.bind(t),e.stopPropagation=t.stopPropagation.bind(t),e}r.addEventListener("mousedown",function(t){w(t)&&m(t)}),r.addEventListener("touchstart",function(t){b(t,m)}),window.addEventListener("mousemove",function(t){h&&(w(t)?_(t):v(t))}),window.addEventListener("touchmove",function(t){b(t,_)}),window.addEventListener("mouseup",function(t){h&&!w(t)&&v(t)}),r.addEventListener("touchend",k),r.addEventListener("touchcancel",k)}function n(t,e,r){t.addEventListener(e,r,!1)}return document.documentElement.firstElementChild.appendChild(document.createElement("style")).textContent=".layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_wrapper.no_alpha .picker_alpha{display:none}.layout_default .picker_sample{order:1;flex:1 1 auto;min-height:3em}.layout_default .picker_done{order:1;width:3rem;height:2rem}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;cursor:default;pointer-events:auto}.picker_selector{position:absolute;z-index:1;display:block;transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, transparent 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_done{font:inherit;font-family:sans-serif;box-sizing:border-box;text-align:center;cursor:pointer;position:relative;padding:0;text-indent:100%;white-space:nowrap;overflow:hidden}.picker_done::before{content:'Ok';position:absolute;top:0;left:0;display:flex;width:100%;height:100%;justify-content:center;align-items:center;font-size:1rem;text-indent:0}.picker_arrow{position:absolute}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;transform:skew(45deg);transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}",function(){function r(e){t(this,r),this.settings={popup:"right",alpha:!0,layout:"default"},this.setOptions(e)}return e(r,[{key:"setOptions",value:function(t){var e=this;if(t){var r=this.settings;t instanceof HTMLElement?r.parent=t:function(t,e,r){for(var i in t)r&&r.indexOf(i)>=0||(e[i]=t[i])}(t,r),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone);var i=t.color||t.colour;i&&this.setColor(i),r.parent&&r.popup&&!this._popupInited?(n(r.parent,"click",function(t){return e.openHandler(t)}),this._popupInited=!0):t.parent&&!r.popup&&this.show()}}},{key:"openHandler",value:function(t){this.show(),this.settings.parent.style.pointerEvents="none"}},{key:"closeHandler",value:function(t){var e=!1;"mousedown"===t.type?this.domElement.contains(t.target)||(e=!0):(t.preventDefault(),t.stopPropagation(),e=!0),e&&(this.hide(),this.settings.parent.style.pointerEvents="")}},{key:"setColor",value:function(t){var e=new i(t);if(!this.settings.alpha){var r=e.hsla;r[3]=1,e.hsla=r}this.colour=this.color=e,this._setHSLA()}},{key:"setColour",value:function(t){this.setColor(t)}},{key:"show",value:function(){if(this.settings.parent){if(this.domElement)return this.domElement.style.display="",void this._setPosition();var t,e,r=this.settings.template||'<div class="picker_wrapper"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_sample"></div><button class="picker_done"></button></div>',i=(t=r,(e=document.createElement("div")).innerHTML=t,e.firstElementChild);this.domElement=i,this._domH=i.querySelector(".picker_hue"),this._domSL=i.querySelector(".picker_sl"),this._domA=i.querySelector(".picker_alpha"),this._domSample=i.querySelector(".picker_sample"),this._domOkay=i.querySelector(".picker_done"),i.classList.add("layout_"+this.settings.layout),this.settings.alpha||i.classList.add("no_alpha"),this._ifPopup(function(){return i.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this.setColor("#0cf"),this._bindEvents()}}},{key:"hide",value:function(){this.domElement&&(this.domElement.style.display="none")}},{key:"_bindEvents",value:function(){var t=this,e=this;function r(t,e){function r(r,i){var o=i[0]/t.clientWidth,n=i[1]/t.clientHeight;e(o,n)}return{container:t,dragOutside:!1,callback:r,callbackClick:r,callbackDragStart:r}}o(r(this._domH,function(t,r){return e._setHSLA(t)})),o(r(this._domSL,function(t,r){return e._setHSLA(null,t,1-r)})),o(r(this._domA,function(t,r){return e._setHSLA(null,null,null,1-r)})),n(window,"mousedown",function(e){return t._ifPopup(function(){return t.closeHandler(e)})}),n(this._domOkay,"click",function(e){t._ifPopup(function(){return t.closeHandler(e)}),t.onDone&&t.onDone(t.colour)})}},{key:"_setPosition",value:function(){var t=this.settings.parent,e=this.domElement;t!==e.parentNode&&t.appendChild(e),this._ifPopup(function(r){"static"===getComputedStyle(t).position&&(t.style.position="relative");var i=!0===r?"popup_right":"popup_"+r;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(t){t===i?e.classList.add(t):e.classList.remove(t)}),e.classList.add(i)})}},{key:"_setHSLA",value:function(t,e,r,i){var o=arguments,n=this.colour;if(o.length){for(var a=n.hsla,s=0;s<o.length;s++){var l=o[s];(l||0===l)&&(a[s]=l)}n.hsla=a}this._updateUI(),this.onChange&&this.onChange(n)}},{key:"_updateUI",value:function(){if(this.domElement){var t=this.colour,e=t.hsla,r="hsl("+360*e[0]+", 100%, 50%)",i=t.hslString,o=t.hslaString,n=this._domH,a=this._domSL,s=this._domA;p(0,n.firstElementChild,e[0]),this._domSL.style.backgroundColor=this._domH.style.color=r,p(0,a.firstElementChild,e[1]),c(0,a.firstElementChild,1-e[2]),a.style.color=i,c(0,s.firstElementChild,1-e[3]);var l="linear-gradient("+[i,i.replace("hsl","hsla").replace(")",", 0)")]+")";this._domA.style.backgroundImage=l+", url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",this._domSample.style.color=o}function p(t,e,r){e.style.left=100*r+"%"}function c(t,e,r){e.style.top=100*r+"%"}}},{key:"_ifPopup",value:function(t,e){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):e&&e()}}]),r}()});