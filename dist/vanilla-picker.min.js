/*!
 * vanilla-picker v2.0.0-alpha.3
 * https://github.com/Sphinxxxx/Picker
 *
 * Copyright 2017-2018 Adam Brooks (https://github.com/dissimulate), Andreas Borgen (https://github.com/Sphinxxxx)
 * Released under the ISC license.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Picker=t()}(this,function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};String.prototype.startsWith=String.prototype.startsWith||function(e){return 0===this.indexOf(e)},String.prototype.padStart=String.prototype.padStart||function(e,t){for(var i=this;i.length<e;)i=t+i;return i};var r=function(){function r(t,n,o,a){e(this,r);var s=this;if(void 0===t);else if(Array.isArray(t))this.rgba=t;else if(void 0===o){var l=t&&(""+t).trim();l&&function(e){if(e.startsWith("#"))s.rgba=r.hexToRgb(e);else if(e.startsWith("hsl")){var t=e.match(/([\-\d\.e]+)/g).map(Number),n=i(t,4),o=n[0],a=n[1],l=n[2],c=n[3];void 0===c&&(c=1),o/=360,a/=100,l/=100,s.hsla=[o,a,l,c]}else{var h=e.match(/([\-\d\.e]+)/g).map(Number),d=i(h,4),u=d[0],p=d[1],f=d[2],g=d[3];void 0===g&&(g=1),s.rgba=[u,p,f,g]}}(l.toLowerCase())}else this.rgba=[t,n,o,void 0===a?1:a]}return t(r,[{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=r.hslToRgb(this._hsla)},set:function(e){3===e.length&&(e[3]=1),this._rgba=e,this._hsla=null}},{key:"rgbString",get:function(){return"rgb("+this.rgba.slice(0,3)+")"}},{key:"rgbaString",get:function(){return"rgba("+this.rgba+")"}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=r.rgbToHsl(this._rgba)},set:function(e){3===e.length&&(e[3]=1),this._hsla=e,this._rgba=null}},{key:"hslString",get:function(){var e=this.hsla;return"hsl("+360*e[0]+","+100*e[1]+"%,"+100*e[2]+"%)"}},{key:"hslaString",get:function(){var e=this.hsla;return"hsla("+360*e[0]+","+100*e[1]+"%,"+100*e[2]+"%,"+e[3]+")"}},{key:"hex",get:function(){return"#"+this.rgba.map(function(e,t){return t<3?e.toString(16):(255*e).toString(16)}).map(function(e){return e.padStart(2,"0")}).join("")},set:function(e){this.rgba=r.hexToRgb(e)}}],[{key:"hexToRgb",value:function(e){var t=(e.startsWith("#")?e.slice(1):e).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!t.match(/^(\w{8})$/))throw new Error("Unknown hex color; "+e);var i=t.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(e){return parseInt(e,16)});return i[3]=i[3]/255,i}},{key:"rgbToHsl",value:function(e){var t=i(e,4),r=t[0],n=t[1],o=t[2],a=t[3];r/=255,n/=255,o/=255;var s=Math.max(r,n,o),l=Math.min(r,n,o),c=void 0,h=void 0,d=(s+l)/2;if(s===l)c=h=0;else{var u=s-l;switch(h=d>.5?u/(2-s-l):u/(s+l),s){case r:c=(n-o)/u+(n<o?6:0);break;case n:c=(o-r)/u+2;break;case o:c=(r-n)/u+4}c/=6}return[c,h,d,a]}},{key:"hslToRgb",value:function(e){var t=i(e,4),r=t[0],n=t[1],o=t[2],a=t[3],s=void 0,l=void 0,c=void 0;if(0===n)s=l=c=o;else{var h=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e},d=o<.5?o*(1+n):o+n-o*n,u=2*o-d;s=h(u,d,r+1/3),l=h(u,d,r),c=h(u,d,r-1/3)}var p=[255*s,255*l,255*c].map(Math.round);return p[3]=a,p}}]),r}();function n(e){var t=Element.prototype;t.matches||(t.matches=t.msMatchesSelector||t.webkitMatchesSelector),t.closest||(t.closest=function(e){var t=this;do{if(t.matches(e))return t;t="svg"===t.tagName?t.parentNode:t.parentElement}while(t);return null});var i=(e=e||{}).container||document.documentElement,r=e.selector,n=e.callback||console.log,o=e.callbackDragStart,a=e.callbackDragEnd,s=e.callbackClick,l=!1!==e.roundCoords,c=!1!==e.dragOutside,h=e.handleOffset||!1!==e.handleOffset,d=null;switch(h){case"center":d=!0;break;case"topleft":case"top-left":d=!1}var u=void 0,p=void 0,f=void 0;function g(e,t,r,n){var o=e.clientX,a=e.clientY;function s(e,t,i){return Math.max(t,Math.min(e,i))}if(t){var c=t.getBoundingClientRect();if(o-=c.left,a-=c.top,r&&(o-=r[0],a-=r[1]),n&&(o=s(o,0,c.width),a=s(a,0,c.height)),t!==i)(null!==d?d:"circle"===t.nodeName||"ellipse"===t.nodeName)&&(o-=c.width/2,a-=c.height/2)}return l?[Math.round(o),Math.round(a)]:[o,a]}function v(e){(u=r?e.target.closest(r):{})&&(e.preventDefault(),e.stopPropagation(),p=r&&h?g(e,u):[0,0],f=g(e,i,p),l&&(f=f.map(Math.round)),o&&o(u,f))}function m(e){if(u){e.preventDefault(),e.stopPropagation();var t=g(e,i,p,!c);n(u,t,f)}}function b(e){if(u){if(a||s){var t=g(e,i,p,!c);s&&f[0]===t[0]&&f[1]===t[1]&&s(u,f),a&&a(u,t,f)}u=null}}function k(e){b(y(e))}function w(e){return void 0!==e.buttons?1===e.buttons:1===e.which}function _(e,t){1===e.touches.length?t(y(e)):b(e)}function y(e){var t=e.targetTouches[0];return t||(t=e.changedTouches[0]),t.preventDefault=e.preventDefault.bind(e),t.stopPropagation=e.stopPropagation.bind(e),t}i.addEventListener("mousedown",function(e){w(e)&&v(e)}),i.addEventListener("touchstart",function(e){_(e,v)}),window.addEventListener("mousemove",function(e){u&&(w(e)?m(e):b(e))}),window.addEventListener("touchmove",function(e){_(e,m)}),window.addEventListener("mouseup",function(e){u&&!w(e)&&b(e)}),i.addEventListener("touchend",k),i.addEventListener("touchcancel",k)}document.documentElement.firstElementChild.appendChild(document.createElement("style")).textContent=".picker_wrapper{position:absolute;display:block;width:272px;padding:8px 0 8px 8px;box-sizing:border-box;overflow:visible;cursor:default;pointer-events:auto;z-index:1;color:red}.picker_wrapper,.picker_wrapper::before,.picker_wrapper::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper::before,.picker_wrapper::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper::before{width:30px;height:30px;transform:skew(45deg);transform-origin:0 100%}.picker_wrapper::after{width:40px;height:40px;box-shadow:none}.picker_wrapper>div{margin:8px;float:left}.picker_hue{width:240px;height:20px;position:relative;margin-left:10px;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);outline:1px solid #cccccc}.picker_sl{width:203px;height:203px;position:relative;outline:1px solid #cccccc;background-color:red;background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, transparent 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha{width:20px;height:200px;position:relative;margin-left:10px;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") top/contain white;outline:1px solid #cccccc}.picker_selector{position:absolute;display:block;width:24px;height:24px;margin:-12px;cursor:pointer;border:2px solid white;box-sizing:border-box;border-radius:20px;box-shadow:0 0 3px 1px #67b9ff;background:currentColor}.picker_slider .picker_selector{border-radius:2px}.picker_hue .picker_selector{top:50%}.picker_sl .picker_selector{left:100%}.picker_alpha .picker_selector{left:50%;background:none}.picker_sample{width:170px;height:30px;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/20px white;position:relative;margin-top:10px;outline:1px solid #aaaaaa}.picker_sample::before{content:\"\";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_done{width:53px;height:30px;line-height:30px;color:#444444;background:#e2e2e2;outline:1px solid #cccccc;box-shadow:0 0 3px 1px #eeeeee;text-align:center;cursor:pointer}";return function(){function i(t){if(e(this,i),this.settings={parent:document.body,orientation:"right",x:"auto",y:"auto",arrowSize:20},t instanceof HTMLElement)this.settings.parent=t;else for(var r in t)this.settings[r]=t[r];this.sliders={picker_hue:{down:!1,vertical:!0},picker_sl:{down:!1},picker_alpha:{down:!1,vertical:!0}},this.onDone=null,this.onChange=null}return t(i,[{key:"setColor",value:function(e){this.colour=this.color=new r(e),this._setHSLA()}},{key:"show",value:function(){var e=this.settings.parent;if(e.style.pointerEvents="none",this.domElement)this.domElement.style.display="";else{var t,i,r=(t='<div class="picker_wrapper">\n   <div class="picker_hue picker_slider">\n       <div class="picker_selector"></div>\n   </div>\n   <div class="picker_sl">\n       <div class="picker_selector"></div>\n   </div>\n   <div class="picker_alpha picker_slider">\n       <div class="picker_selector"></div>\n   </div>\n   <div class="picker_sample"></div>\n   <div class="picker_done">ok</div>\n</div>',(i=document.createElement("div")).innerHTML=t,i.firstElementChild);this.domElement=r,this._domH=r.querySelector(".picker_hue"),this._domSL=r.querySelector(".picker_sl"),this._domA=r.querySelector(".picker_alpha"),this._domSample=r.querySelector(".picker_sample"),this._domOkay=r.querySelector(".picker_done"),"absolute"!==getComputedStyle(e).position&&(e.style.position="relative"),e.appendChild(this.domElement);var n=r.offsetWidth,o=r.offsetHeight,a=e.offsetWidth,s=e.offsetHeight,l=this.settings.arrowSize,c=this.settings.x,h=this.settings.y;if("auto"===c)switch(this.settings.orientation){case"left":c=-n-l-4;break;case"top":case"bottom":c=a/2-l;break;case"center":case"centre":c=-n/2+a/2;break;default:c=a+l+4}if("auto"===h)switch(this.settings.orientation){case"top":h=-o-l-4;break;case"bottom":h=s+l+4;break;case"center":case"centre":h=-s/2+-o/2;break;default:h=s/2-l}r.style.left=c+"px",r.style.top=h+"px",this._bindEvents(),this.colour?this._updateUI():this.setColor("#0cf")}}},{key:"hide",value:function(){this.domElement&&(this.domElement.style.display="none"),this.settings.parent.style.pointerEvents=""}},{key:"_bindEvents",value:function(){var e=this;function t(e,t){function i(i,r){var n=r[0]/e.clientWidth,o=r[1]/e.clientHeight;t(n,o)}return{container:e,callback:i,callbackClick:i,dragOutside:!1}}n(t(this._domH,function(t,i){return e._setHSLA(t)})),n(t(this._domSL,function(t,i){return e._setHSLA(null,t,1-i)})),n(t(this._domA,function(t,i){return e._setHSLA(null,null,null,1-i)})),this.domElement.addEventListener("mousedown",function(e){e.stopPropagation(),e.preventDefault()}),window.addEventListener("mousedown",function(t){e.hide()}),this._domOkay.onclick=function(t){t.preventDefault(),t.stopPropagation(),e._done()}}},{key:"_setHSLA",value:function(e,t,i,r){var n=arguments;if(n.length){for(var o=this.colour.hsla,a=0;a<n.length;a++){var s=n[a];(s||0===s)&&(o[a]=s)}this.colour.hsla=o}this._updateUI(),this.onChange&&this.onChange(this.colour)}},{key:"_updateUI",value:function(){if(this.domElement){var e=this.colour,t=e.hsla,i="hsl("+360*t[0]+", 100%, 50%)",r=e.hslString,n=e.hslaString,o=this._domH,a=this._domSL,s=this._domA;c(o,o.firstElementChild,t[0]),this._domSL.style.backgroundColor=this._domH.style.color=i,c(a,a.firstElementChild,t[1]),h(a,a.firstElementChild,1-t[2]),a.style.color=r,h(s,s.firstElementChild,1-t[3]);var l="linear-gradient("+[r,r.replace("hsl","hsla").replace(")",", 0)")]+")";this._domA.style.backgroundImage=l+", url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",this._domSample.style.color=n}function c(e,t,i){t.style.left=e.clientWidth*i+"px"}function h(e,t,i){t.style.top=e.clientHeight*i+"px"}}},{key:"_done",value:function(){this.hide(),this.onDone&&this.onDone(this.colour)}}]),i}()});