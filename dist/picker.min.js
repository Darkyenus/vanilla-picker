/*!
 * Picker <https://github.com/Sphinxxxx/Picker>
 * A simple, easy to use, versatile and customisable Javascript colour picker.
 * Version 2.0.0-alpha.1  2018-01-18
 *
 * Copyright (c) 2014-2018 Adam Brooks (https://github.com/dissimulate), Andreas Borgen (https://github.com/Sphinxxxx)
 * Licensed under the ISC license.
 */
!function(e,t){if("function"==typeof define&&define.amd)define("Picker",["module"],t);else if("undefined"!=typeof exports)t(module);else{var i={exports:{}};t(i),e.Picker=i.exports}}(this,function(e){"use strict";var t=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function i(e){function t(e,t,i,n){var o=e.clientX;if(e=e.clientY,t){var r=t.getBoundingClientRect();o-=r.left,e-=r.top,i&&(o-=i[0],e-=i[1]),n&&(o=Math.max(0,Math.min(o,r.width)),e=Math.max(0,Math.min(e,r.height))),t!==d&&(null!==x?x:"circle"===t.nodeName||"ellipse"===t.nodeName)&&(o-=r.width/2,e-=r.height/2)}return v?[Math.round(o),Math.round(e)]:[o,e]}function i(e){(c=u?e.target.closest(u):{})&&(e.preventDefault(),e.stopPropagation(),h=u&&b?t(e,c):[0,0],p=t(e,d,h),v&&(p=p.map(Math.round)),g&&g(c,p))}function n(e){c&&(e.preventDefault(),e.stopPropagation(),e=t(e,d,h,!m),f(c,e,p))}function o(e){c&&((_||k)&&(e=t(e,d,h,!m),k&&p[0]===e[0]&&p[1]===e[1]&&k(c,p),_&&_(c,e,p)),c=null)}function r(e){o(a(e))}function s(e){return void 0!==e.buttons?1===e.buttons:1===e.which}function a(e){var t=e.targetTouches[0];return t||(t=e.changedTouches[0]),t.preventDefault=e.preventDefault.bind(e),t.stopPropagation=e.stopPropagation.bind(e),t}var l=Element.prototype;l.matches||(l.matches=l.msMatchesSelector||l.webkitMatchesSelector),l.closest||(l.closest=function(e){var t=this;do{if(t.matches(e))return t;t="svg"===t.tagName?t.parentNode:t.parentElement}while(t);return null});var c,h,p,d=(e=e||{}).container||document.documentElement,u=e.selector,f=e.callback||console.log,g=e.callbackDragStart,_=e.callbackDragEnd,k=e.callbackClick,v=!1!==e.roundCoords,m=!1!==e.dragOutside,b=e.handleOffset||!1!==e.handleOffset,x=null;switch(b){case"center":x=!0;break;case"topleft":case"top-left":x=!1}d.addEventListener("mousedown",function(e){s(e)&&i(e)}),d.addEventListener("touchstart",function(e){1!==e.touches.length?o(e):i(a(e))}),window.addEventListener("mousemove",function(e){c&&(s(e)?n(e):o(e))}),window.addEventListener("touchmove",function(e){1!==e.touches.length?o(e):n(a(e))}),window.addEventListener("mouseup",function(e){c&&!s(e)&&o(e)}),d.addEventListener("touchend",r),d.addEventListener("touchcancel",r)}window.addEventListener("load",function(){return document.body.appendChild(document.createElement("style")).textContent=".picker_wrapper{position:absolute;display:block;width:272px;padding:8px 0 8px 8px;box-sizing:border-box;overflow:visible;cursor:default;pointer-events:auto;z-index:1;color:red}.picker_wrapper,.picker_wrapper::before,.picker_wrapper::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper::before,.picker_wrapper::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper::before{width:30px;height:30px;transform:skew(45deg);transform-origin:0 100%}.picker_wrapper::after{width:40px;height:40px;box-shadow:none}.picker_wrapper>div{margin:8px;float:left}.picker_hue{width:240px;height:20px;position:relative;margin-left:10px;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);outline:1px solid #cccccc}.picker_sl{width:203px;height:203px;position:relative;outline:1px solid #cccccc;background-color:red;background-image:linear-gradient(0deg, black, transparent),linear-gradient(90deg, white, rgba(255,255,255,0))}.picker_alpha{width:20px;height:200px;position:relative;margin-left:10px;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") top/contain white;outline:1px solid #cccccc}.picker_selector{position:absolute;display:block;width:24px;height:24px;margin:-12px;cursor:pointer;border:2px solid white;box-sizing:border-box;border-radius:20px;box-shadow:0 0 3px 1px #67b9ff;background:currentColor}.picker_slider .picker_selector{border-radius:2px}.picker_hue .picker_selector{top:50%}.picker_sl .picker_selector{left:100%}.picker_alpha .picker_selector{left:50%;background:none}.picker_sample{width:170px;height:30px;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/20px white;position:relative;margin-top:10px;outline:1px solid #aaaaaa}.picker_sample::before{content:\"\";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_done{width:53px;height:30px;line-height:30px;color:#444444;background:#e2e2e2;outline:1px solid #cccccc;box-shadow:0 0 3px 1px #eeeeee;text-align:center;cursor:pointer}\n"});var n="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",o=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings={parent:document.body,orientation:"right",x:"auto",y:"auto",arrow_size:20},t instanceof HTMLElement)this.settings.parent=t;else for(var i in t)this.settings[i]=t[i];this.sliders={picker_hue:{down:!1,vertical:!0},picker_sl:{down:!1},picker_alpha:{down:!1,vertical:!0}},this.colour=this.color={hue:0,saturation:1,value:1,alpha:1,hsl:function(){var e=this.hue,t=this.saturation,i=this.value,n=(2-t)*i,o=void 0;return 0===t||0===i?o=0:(o=t*i,o/=n<=1?n:2-n),n/=2,{h:e,s:o*=100,l:n*=100,toString:function(){return"hsl("+this.h+", "+this.s+"%, "+this.l+"%)"}}},hsla:function(){var e=this.hsl();return e.a=this.alpha,e.toString=function(){return"hsla("+this.h+", "+this.s+"%, "+this.l+"%, "+this.a+")"},e},rgb:function(){var e,t,i,n=this.hue,o=this.saturation,r=this.value;n/=60;var s=Math.floor(n),a=n-s,l=r*(1-o),c=r*(1-o*a),h=r*(1-o*(1-a));return e=[r,c,l,l,h,r][s],t=[h,r,r,c,l,l][s],i=[l,l,h,r,r,c][s],{r:Math.floor(255*e),g:Math.floor(255*t),b:Math.floor(255*i),toString:function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"}}},rgba:function(){var e=this.rgb();return e.a=this.alpha,e.toString=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},e},hex:function(){var e=this.rgb();function t(e){var t=e.toString(16);return 1==t.length?"0"+t:t}return{r:t(e.r),g:t(e.g),b:t(e.b),toString:function(){return"#"+this.r+this.g+this.b}}}},this.on_done=null,this.on_change=null}return t(e,[{key:"show",value:function(){var e=this.settings.parent;if(e.style.pointerEvents="none",this.domElement)this.domElement.style.display="";else{var t,i,n=(t='\n<div class="picker_wrapper">\n   <div class="picker_hue picker_slider">\n       <div class="picker_selector"></div>\n   </div>\n   <div class="picker_sl">\n       <div class="picker_selector"></div>\n   </div>\n   <div class="picker_alpha picker_slider">\n       <div class="picker_selector"></div>\n   </div>\n   <div class="picker_sample"></div>\n   <div class="picker_done">ok</div>\n</div>'.trim(),(i=document.createElement("div")).innerHTML=t,i.firstChild);if(this.domElement=n,this._domH=n.querySelector(".picker_hue"),this._domSL=n.querySelector(".picker_sl"),this._domA=n.querySelector(".picker_alpha"),this._domSample=n.querySelector(".picker_sample"),this._domOkay=n.querySelector(".picker_done"),"absolute"!==getComputedStyle(e).position&&(e.style.position="relative"),e.appendChild(this.domElement),"auto"===this.settings.x)switch(this.settings.orientation){case"left":n.style.left=-n.offsetWidth-this.settings.arrow_size-4+"px";break;case"top":case"bottom":n.style.left=e.offsetWidth/2-this.settings.arrow_size+"px";break;case"center":case"centre":n.style.left=-n.offsetWidth/2+e.offsetWidth/2+"px";break;default:n.style.left=e.offsetWidth+this.settings.arrow_size+4+"px"}else n.style.left=parseInt(this.settings.x)+"px";if("auto"===this.settings.y)switch(this.settings.orientation){case"top":n.style.top=-n.offsetHeight-this.settings.arrow_size-4+"px";break;case"bottom":n.style.top=e.offsetHeight+this.settings.arrow_size+4+"px";break;case"center":case"centre":n.style.top=-e.offsetHeight/2+-n.offsetHeight/2+"px";break;default:n.style.top=e.offsetHeight/2-this.settings.arrow_size+"px"}else n.style.top=parseInt(this.settings.y)+"px";this.bind_events(),this.update_sample()}}},{key:"update_picker_hue",value:function(e,t){this.colour.hue=360*e,this.update_sl_hue(),this.update_sample(),this.update_hue_slider()}},{key:"update_picker_sl",value:function(e,t){this.colour.saturation=e,this.colour.value=1-t,this.update_alpha_slider(),this.update_sample(),this.update_sl_slider()}},{key:"update_picker_alpha",value:function(e,t){this.colour.alpha=1-t,this.update_sample(),this.update_alpha_slider()}},{key:"update_sample",value:function(){this._domSample.style.color=this.colour.hsla().toString(),this.update_alpha_hue(),this.on_change&&this.on_change(this.colour)}},{key:"update_sl_hue",value:function(){this._domSL.style.backgroundColor="hsl("+this.colour.hue+", 100%, 50%)",this.update_sl_slider(),this.update_alpha_slider()}},{key:"update_alpha_hue",value:function(){var e=this.colour.hsl().toString(),t=["linear-gradient("+[e,e.replace("hsl","hsla").replace(")",", 0)")]+")",n].join(", ");this._domA.style.backgroundImage=t}},{key:"update_hue_slider",value:function(){this._domH.style.color="hsl("+this.colour.hue+", 100%, 50%)"}},{key:"update_sl_slider",value:function(){this._domSL.style.color=this.colour.hsl().toString()}},{key:"update_alpha_slider",value:function(){document.querySelector("#picker_alpha .picker_selector")}},{key:"bind_events",value:function(){var e=this;function t(t,i,n){n.call(e,i[0]/t.clientWidth,i[1]/t.clientHeight)}function n(i,n){var o=e._domH;o.firstElementChild.style.left=n[0]+"px",t(o,n,e.update_picker_hue)}function o(i,n){var o=e._domSL;o.firstElementChild.style.left=n[0]+"px",o.firstElementChild.style.top=n[1]+"px",t(o,n,e.update_picker_sl)}function r(i,n){var o=e._domA;o.firstElementChild.style.top=n[1]+"px",t(o,n,e.update_picker_alpha)}i({container:this._domH,dragOutside:!1,callback:n,callbackClick:n}),i({container:this._domSL,dragOutside:!1,callback:o,callbackClick:o}),i({container:this._domA,dragOutside:!1,callback:r,callbackClick:r}),this.domElement.addEventListener("mousedown",function(e){e.stopPropagation(),e.preventDefault()}),window.addEventListener("mousedown",function(t){e.hide()}),this._domOkay.onclick=function(t){t.preventDefault(),t.stopPropagation(),e.done()}}},{key:"done",value:function(){this.hide(),this.on_done&&this.on_done(this.colour)}},{key:"hide",value:function(){this.domElement&&(this.domElement.style.display="none"),this.settings.parent.style.pointerEvents=""}}]),e}();e.exports=o});